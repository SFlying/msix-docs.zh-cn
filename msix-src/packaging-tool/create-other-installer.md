---
title: 创建包含所有其他安装程序的应用程序包
description: 使用我们的转换工具创建包含所有其他安装程序的 MSIX 包
ms.date: 04/04/2019
ms.topic: article
keywords: MSIX, MPT, MSIX 打包工具
ms.localizationpriority: medium
ms.openlocfilehash: 9ee45813396a0342a0ea2ad3a9c1784820f7dbdc
ms.sourcegitcommit: 3b780f7599f1777e99ba66baf66e42e2c8dd2d97
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/18/2019
ms.locfileid: "72561208"
---
# <a name="create-an-msix-package-with-all-other-installer-types"></a>创建包含所有其他安装程序类型的 MSIX 包

可以使用 MSIX 打包工具基于任何安装程序类型创建 MSIX 应用程序包。 用于将应用转换为 MSIX 的设备或 VM 必须满足以下条件：

- 必须配置为接收远程命令（在 VM 上运行 Enable-PSRemoting 命令）。
- 必须运行 Windows 10 版本 1809 或更高版本。
- 首次启动该工具时，系统会提示你同意发送遥测数据。 必须注意，共享的诊断数据仅来自应用，永远不会用于识别你的身份或与你联系。 这些数据仅用于帮助我们更快地为你解决问题。

## <a name="choose-the-installer-you-want-to-package"></a>选择要打包的安装程序

在“选择要打包的安装程序”下，找到计算机上的安装程序。 如果你没有安装程序，可以跳过此步骤。 我们建议为包签名。

- 选中“为包签名”下面的框，浏览到并选择 .pfx 证书文件。 如果证书受密码保护，请在密码框中键入密码。
- 选中“使用安装程序参数”下面的框，并在提供的字段中输入所需的参数。 这是可选操作。 此字段接受任何字符串。

## <a name="packaging-method"></a>打包方法

- 选择打包方法，然后单击“下一步”。

## <a name="package-information"></a>包信息

选择在现有虚拟机上打包应用程序后，必须提供有关应用的信息。 该工具会尝试根据安装程序提供的信息自动填充这些字段（如果适用）。 如果需要，始终可以选择更新条目。 带星号 * 的字段是必填的。 如果条目无效，系统会提供内联帮助。

- 包名称：
  - 必填字段，对应于清单中的包标识名称，用于描述包的内容。
  - 必须与用于对包签名的证书的使用者名称信息相匹配。
  - 不会向最终用户显示。
  - 区分大小写，不能包含空格。
  - 可以接受由字母数字、句点和短划线字符构成的，长度为 3 到 50 个字符的字符串。
  - 不能以句点结尾，必须是下列其中一项： "CON"、"PRN"、"AUX"、"NUL"、"COM1"、"COM2"、"COM3"、"COM4"、"COM5"、"COM6"、"COM7"、"COM8"、"COM9"、"LPT1"、"LPT2"、"LPT3"、"LPT4"、"LPT5"、"LPT6"、"LPT7"、"LPT8"、"LPT9" 和 ""。

- 包显示名称：
  - 必填字段，对应于清单中的包，在开始菜单和设置页中向用户显示友好的包名称。
  - 该字段接受长度为 1 到 256 个字符的字符串，并且可本地化。

- 发布者名称：
  - 必填字段，对应于包，用于描述发布者信息。
  - “发布者”属性必须与用于对包签名的证书的发布者使用者信息相匹配。
  - 此字段接受长度为 1 到 8192 个字符且符合可分辨名称正则表达式的字符串："(CN | L | O | OU | E | C | S | STREET | T | G | I | SN | DC | SERIALNUMBER | Description | PostalCode | POBox | Phone | X21Address | dnQualifier | (OID.(0 | [1-9][0-9])(.(0 | [1-9][0-9]))+))=(([^,+="<>#;])+ | ".")(, ((CN | L | O | OU | E | C | S | STREET | T | G | I | SN | DC | SERIALNUMBER | Description | PostalCode | POBox | Phone | X21Address | dnQualifier | (OID.(0 | [1-9][0-9])(.(0 | [1-9][0-9]))+))=(([^,+="<>#;])+ | ".")))*"。

- 发布者显示名称：

  - 必填字段，对应于清单中的包，在应用安装程序和设置页中向用户显示友好的发布者名称。
  - 该字段接受长度为 1 到 256 个字符的字符串，并且可本地化。

- 版本：

  - 必填字段，对应于清单中的包，用于描述包的版本号。
  - 此字段接受四表示法形式的版本字符串： "主要版本. 次要版本. 内部版本. 修订版本"。

- 安装位置：

  - 这是安装程序要将应用程序有效负载复制到的位置（通常是 Programs Files 文件夹）。
  - 此字段是选填的，但建议填写，尤其是在 Program Files 外部安装应用有效负载时。
  - 浏览到并选择文件夹路径。
  - 在执行每项应用程序安装操作时，请确保此文件与安装程序的安装位置相匹配。

## <a name="prepare-computer"></a>准备计算机

接下来，“准备计算机”页会提供用于准备要打包的计算机的选项。

MSIX 打包工具驱动程序是必需的，如果未启用该驱动程序，该工具会自动尝试启用它。 该工具首先会检查 DISM，以确定是否已安装该驱动程序。

> [!NOTE]
> MSIX 打包工具驱动程序会监视系统，以捕获安装程序在系统上所做的更改，使 MSIX 打包工具能够基于这些更改创建包。

- [可选] 选中“Windows Search 处于活动状态”对应的复选框，如果你选择禁用搜索服务，请选择“禁用所选项”。

  - 这只是建议的操作，而不是必需的。
  - 禁用后，该工具会将状态字段更新为“已禁用”

- [可选] 选中“Windows 更新处于活动状态”对应的复选框，如果你选择禁用更新服务，请选择“禁用所选项”。

  - 这只是建议的操作，而不是必需的。
  - 禁用后，该工具会将状态字段更新为“已禁用”。

- “等待重新启动”复选框默认已禁用。 如果系统提示等待中的操作需要重新启动，则你需要手动重启计算机，然后再次启动该工具。 这只是建议的操作，而不是必需的。

计算机准备完成后，单击“下一步”。

## <a name="installation"></a>安装

此时，如果你尚未向我们提供安装程序，请继续运行所有必需的安装程序。 这包括自定义脚本和程序。 该工具会监视设备上的更改，包括正在设备上安装的内容。

> [!NOTE]
> 在转换期间，安装程序可能会运行服务。 在转换期间不会捕获服务。 因此，应用可能会安装，但可能会在运行时出现问题。

## <a name="manage-first-launch-tasks"></a>管理初始启动任务

此页显示工具捕获到的应用程序可执行文件。 如果有多个应用程序，请选中对应于主入口点的框。 如果在此处未看到应用程序 .exe，请手动浏览并运行它。

单击“下一步”。此时会出现一个弹出窗口，提示你确认已完成应用程序的安装和初始启动任务的管理。

- 如果已完成，请单击“是，继续”。
- 如果尚未完成，请单击“否，未完成”。 随后你会返回到上一页，可在其中启动应用程序、安装或复制其他文件和 DLL/可执行文件。

## <a name="create-package"></a>创建程序包

- 提供用于保存 MSIX 包的位置。
- 默认保存位置为桌面。
- 可以在“设置”菜单中定义默认保存位置。
- 在保存 MSIX 包之前若要继续编辑包的内容和属性，可以选择“包编辑器”转到[包编辑器](https://docs.microsoft.com/windows/msix/packaging-tool/package-editor)
- 单击“创建”以创建 MSIX 包。

创建包后，该工具将显示一个弹出窗口，其中显示名称、发布者、日志的保存位置以及新创建的包的保存位置。 可以关闭此弹出窗口以便重定向到欢迎页。 还可以选择“包编辑器”来查看和修改包的内容与属性。
